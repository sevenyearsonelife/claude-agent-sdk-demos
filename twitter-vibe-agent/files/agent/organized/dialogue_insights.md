# 用户理解与困惑

## 已理解

### 核心架构概念
- Claude Code 的核心架构理念：简单的单线程主循环，结合规范的工具和规划，实现可控的自主性
- nO 主循环引擎是系统的核心，负责任务调度、状态管理和异常处理
- h2A 异步消息队列实现实时转向，允许用户在任务执行中途插入指令
- wU2 压缩器在上下文窗口达到 92% 时自动触发，管理长期记忆
- I2A（子代理/Task Agent）通过 dispatch_agent 调用，但不能递归派生

### 设计哲学
- "激进的简单性"（Radical Simplicity）：选择正则表达式而非向量数据库，选择 Markdown 文件而非数据库
- "通过约束实现简单性"（Simplicity through constraint）
- 单线程设计保证可调试性和可靠性
- 拒绝多智能体蜂群（Multi-agent Swarms）架构

### 工具对比
- Codex：Shell 优先设计、懒加载、隐式规划、OS 级沙箱
- Claude Code：结构化工具箱、主动扫描、显式规划（TodoWrite）、应用级权限控制
- 两者共同遵循"以差异为中心"（diff-centric）的代码修改理念

### 配置文件知识
- CLAUDE.md 是 Claude Code 的长期记忆存储
- AGENTS.md 是 Codex/Cursor/Builder.io 支持的通用标准
- 实证研究显示：72.6% 的配置文件包含软件架构信息

## 困惑点

### 技术细节
- h2A 的双重缓冲机制具体如何实现零延迟路径？
- wU2 压缩器的重要性评分算法是什么？
- 为什么是 92% 这个特定的触发阈值？

### 实践层面
- 在实际项目中如何平衡 Token 消耗和上下文完整性？
- 何时应该使用显式规划，何时适合隐式规划？
- 如何判断一个任务需要派生子代理还是主循环直接处理？

### 生态差异
- 为什么 Claude Code 不支持 AGENTS.md 标准？
- 两种配置文件是否可以共存或自动转换？

## 目标受众/岗位

- 算法工程师
- AI 编程工具使用者/决策者
- 需要选择 AI 编码助手的技术团队

## 难度偏好

- 用户通过抽认卡复习形式学习，倾向于结构化的知识梳理
- 关注技术细节（如逆向工程发现的代号、具体阈值）
- 也重视类比和实际案例

## 风格偏好

- 技术讲解风格：使用类比帮助理解（如厨师、餐厅、GPS 等类比）
- 结构化输出：分点阐述（工作机制、设计哲学、对比、总结）
- 重视数据支撑（如 328 个项目的实证研究）

## 禁用项/避免

- 避免纯理论堆砌，需结合实际场景
- 避免过于抽象，需要具体的技术细节和数值
- 避免混淆 Claude Code 和 Codex 的特性（需清晰区分）

## 用户关注的核心问题

1. 如何为团队选择合适的 AI 编码助手？
2. 配置文件（CLAUDE.md/AGENTS.md）应该包含哪些内容？
3. 两种工具在 GitHub 集成上的实际体验差异？
4. Token 成本和效率如何平衡？
